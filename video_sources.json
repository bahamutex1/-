import requests
from bs4 import BeautifulSoup
import json

def extract_video_sources(url):
    headers = {
        "User-Agent": "Mozilla/5.0"
    }
    response = requests.get(url, headers=headers)
    soup = BeautifulSoup(response.text, 'html.parser')

    video_urls = []

    # æŠ“å– <video> æ¨™ç±¤çš„ src å±¬æ€§
    for video in soup.find_all('video'):
        src = video.get('src')
        if src:
            video_urls.append(src)

    # æŠ“å– <source> æ¨™ç±¤çš„ src å±¬æ€§
    for source in soup.find_all('source'):
        src = source.get('src')
        if src:
            video_urls.append(src)

    return video_urls

# ğŸ”§ è«‹è¼¸å…¥è¦æ“·å–çš„ç¶²ç«™ URL
target_url = "https://hanime1.me/"

# æ“·å–å½±ç‰‡é€£çµ
video_links = extract_video_sources(target_url)

# å„²å­˜ç‚º .json æª”æ¡ˆ
output_filename = "video_sources.json"
with open(output_filename, 'w', encoding='utf-8') as f:
    json.dump(video_links, f, ensure_ascii=False, indent=4)

print(f"å·²å„²å­˜å½±ç‰‡ä¾†æºåˆ°ï¼š{output_filename}")
